/* File:      sysinitrc.P -- system library search path initialization
** Author(s): kifer
** Contact:   xsb-contact@cs.sunysb.edu
** 
** Copyright (C) The Research Foundation of SUNY, 1986, 1993-1998
** Copyright (C) ECRC, Germany, 1990
** 
** XSB is free software; you can redistribute it and/or modify it under the
** terms of the GNU Library General Public License as published by the Free
** Software Foundation; either version 2 of the License, or (at your option)
** any later version.
** 
** XSB is distributed in the hope that it will be useful, but WITHOUT ANY
** WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
** FOR A PARTICULAR PURPOSE.  See the GNU Library General Public License for
** more details.
** 
** You should have received a copy of the GNU Library General Public License
** along with XSB; if not, write to the Free Software Foundation,
** Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
**
** $Id$
** 
*/


%% This file is consulted from loader.P


:- import stat_flag/2, str_cat/3, stat_set_flag/3, is_backslashing_os/0,
     	  fmt_write_string/3, slash/1
   from machine.
:- import xsb_configuration/2 from configuration.

:- dynamic library_directory/1.

:-
   %% Add the package library to the search path
   xsb_configuration(packagesdir, LibDir1),
   assert(library_directory(LibDir1)),

   %% Add the configuration-INDEPENDENT SITE library to the search path
   xsb_configuration(site_libdir, LibDir2),
   assert(library_directory(LibDir2)),

   %% Add the configuration-SPECIFIC SITE library to the search path
   xsb_configuration(site_config_libdir, LibDir3),
   assert(library_directory(LibDir3)),

   %% Add the SYSTEM configuration-SPECIFIC library to the search path
   xsb_configuration(config_libdir, LibDir4),
   assert(library_directory(LibDir4)),

   %% Add the $USER_HOME/.xsb/config/<arch> directory -- the place for
   %% dynamically compiles *.so files and similar stuff.
   xsb_configuration(user_config_libdir, Libdir5),
   assert(library_directory(Libdir5)).


/* this will go away in the future; its purpose is to make sure that
   xsb_read.P is loaded before users have a chance to load their own
   similarly named module. */
:- import force_file_read_loaded/0 from xsb_read.
:- force_file_read_loaded.

%% Flag 50 tells the loader to start looking at the user-supplied libraries 
%% in site/lib and .xsbinitrc.

:- stat_set_flag(50, 1, 1). % Setting flags[50] tell the loader to start
			    % searching library_directory for non-system
			    % libraries

%% load package maintenance definitions
:- [packaging].
