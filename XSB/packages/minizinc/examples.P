/*
Do not forget to set PATH. Something like this:
  Linux, sh/bash:
    export PATH=$PATH:$HOME/progs/minizinc/MiniZincIDE-2.2.3-bundle-linux/bin
  Windows:
    set PATH=%PATH%;"C:\progs\minizinc\MiniZincIDE-2.2.3-bundle-linux\bin"
*/

%% For optimization problems, the number of solutions must always be 1
%% or else it will return also non-optimal solutions.

%% Australia
?- nl, writeln('Example: Australia'),
   (mzn_do('examples/australia.mzn',[],[],_,4,au(wa,nt,sa,q,nsw,v,t),Result),
       writeln(Result),
       fail
   ;
       true
   ).

%% Australia2
?- nl, writeln('Example: Australia2'),
   (mzn_do('examples/australia2.mzn',[],['Color' = '{ red, yellow, blue }'],_,3,au2(+'W. Australia'=wa, +'N. Territory'=nt, +'S. Australia'=sa, +'Queensland'=q, +'New S. Wales'=nsw, +'Victoria'=v, +'Tasmania'=t),Result),
       writeln(Result),
       fail
   ;
       true
   ).

%% bake.mzn
?- nl, writeln('Example: Baking cookies'),
   (mzn_do('examples/bake.mzn',['examples/bake.dzn'],[butter=1500,cocoa=800],_,1,bake(str(price)=price,str(bananaCakes)=b,str(cocoaCakes)=c),Result),
       writeln(Result),
       fail
   ;
       true
   ).

%% stable marriage
?- nl, writeln('Example: Stable marriage'),
   (mzn_do('examples/marriage.mzn',['examples/marriage.dzn'],[rankMen='[|5,1,2,4,3,|4,1,3,2,5,|5,3,2,4,1,|1,5,4,3,2,|4,3,2,1,5|]'],_,4,marriage(wife=husband),Result),
       writeln(Result),
       fail
   ;
       true
   ).

%% prod-planning.mzn
?- nl, writeln('Example: Product planning'),
   (mzn_do('examples/prod-planning.mzn',['examples/prod-planning.dzn','examples/prod-planning2.dzn'],[profit=[400,550]],_,1,plan(+profit=maxprofit,'Products'=produce,'Resources'=used),Result),
       writeln(Result),
       fail
   ;
       true
   ).

%% N queens
?- nl, writeln('Example: N Queens'),
   (mzn_do('examples/queens.mzn',[],[n=13],_,3,board(q),Result),
       writeln(Result),
       fail
   ;
       true
   ).

%% SEND+MORE+MONEY
?- nl, writeln('Example: Sendmoney'),
   (mzn_do('examples/sendmoney.mzn',[],[],_,3,money(+send = ['S','E','N','D'],+more = ['M','O','R','E'], +money = ['M','O','N','E','Y']),Result),
       writeln(Result),
       fail
   ;
       true
   ).

%% Knapsack
?- nl, writeln('Example: Knapsack'),
   (mzn_do('examples/knapsack.mzn',['examples/knapsack.dzn'],[capacity=200,weights=[90,72,43,40,33], 'ITEM'=anon_enum(5)],_,1,sack(+ 'total weight' = total_weight,+'total profit' = total_profit, +knapsack = knapsack),Result),
       writeln(Result),
       fail
   ;
       true
   ).

%% Social golfers
?- nl, writeln('Example: Golfers'),
   (mzn_do('examples/golfer.mzn',[],[weeks=4,groups=4,size=3],_,3,golfer(str(groups) = 'GROUP',str(weeks) = 'WEEK', str(schedule) = 'Sched'),Result),
       writeln(Result),
       fail
   ;
       true
   ).

%% Job shop
?- nl, writeln('Example: Job shop'),
   (mzn_do('examples/jobshop.mzn',['examples/jobshop.dzn'],['JOB'=anon_enum(5),'TASK'=anon_enum(5)],_,1,jobs(+total_duration=end,+jobs = 'JOB',+tasks = 'TASK', +schedule = s),Result),
       writeln(Result),
       fail
   ;
       true
   ).
