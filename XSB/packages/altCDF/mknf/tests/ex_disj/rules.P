:- import member/2 from basics.

/*
p_or_q \subseteq (p or q)
p_or_q \subseteq r

first \subseteq second

****/

%-----------
% Ex 1 

first(callback).
third(X):- known(second(X)).
fifth(X):- known(fourth(X)).

definedClass(first(Obj),first,Obj):- Obj = callback.
definedClass(second(Obj),second,Obj):- Obj = callback.
definedClass(third(Obj),third,Obj):- Obj = callback.
definedClass(fourth(Obj),fourth,Obj):- Obj = callback.
definedClass(fifth(Obj),fifth,Obj):- Obj = callback.

%-----------
% Ex 2
% win1 \subset not(win2)
% win3 \subset not(win4)

win1(tok).
win3(tok):- dlnot(win2(tok)).
win5(tok):- dlnot(win4(tok)).

definedClass(win1(Obj),win1,Obj):- Obj = tok.
definedClass(win2(Obj),win2,Obj):- Obj = tok.
definedClass(win3(Obj),win3,Obj):- Obj = tok.
definedClass(win4(Obj),win4,Obj):- Obj = tok.
definedClass(win5(Obj),win5,Obj):- Obj = tok.

%-----------
% Ex 3

l1(ab):- dlnot(l2(ab)).
l2(ab):- dlnot(l1(ab)).

definedClass(l1(Obj),l1,Obj):- Obj = ab.
definedClass(l2(Obj),l2,Obj):- Obj = ab.

%-----------
% Ex 4
% p \in not(two4).

one4(X):- known(p4(a4)),dlnot(two4(X)).
two4(X):- known(p4(a4)),dlnot(one4(X)).

p4(a4).

definedClass(p4(X),p4,X):- X = a4.
definedClass(two4(X),two4,X):- X = a4.
definedClass(one4(X),one4,X):- X = a4.

%-----------
% Ex 5 
% p_or_q \subset (p5 \cup q5)
% r \subset not (p5 \cup q5)

p5(a5).

definedClass(p5(X),p5,X):- X = a5.
definedClass(q5(X),q5,X):- X = a5.
definedClass(p_or_q5(X),p_or_q5,X):- X = a5.
definedClass(r5(X),r5,X):- X = a5.

%-----------
% Ex 6

% NaturalDeath ⊑ Pay
% Suicide ⊑ ¬Pay (cheating here)
/*
pay(X):- known(murdered(X)),known(benefits(X,Y)),dlnot(responsible(Y,X)).
suicide(X):- dlnot(naturalDeath(X)),dlnot(murdered(X)).
murdered(X):- dlnot(naturalDeath(X)),dlnot(suicide(X)).

murdered(j2).
responsible(max,j2).
benefits(j2,thomas).

murdered(j3).
responsible(max,j3).
benefits(j3,max).

definedClass(pay(X),pay,X):- member(X,[j1,j2,j3,max,thomas]).
definedClass(suicide(X),suicide,X):- member(X,[j1,j2,j3,max,thomas]).
definedClass(murdered(X),murdered,X):- member(X,[j1,j2,j3,max,thomas]).
definedClass(benefits(X),benefits,X):- member(X,[j1,j2,j3,max,thomas]).
definedClass(responsible(X),responsible,X):- member(X,[j1,j2,j3,max,thomas]).
*/

%-----------
% Ex 7 (not yet working)
% notp \subset not p

p7(a7).
notp7(a7).

definedClass(p7(X),p7,X):- X = a7.
definedClass(notp7(X),notp7,X):- X = a7.

%-----------
% example w. multiple objects.

first1(cb1).
first2(cb2):- known(first1(cb1)).
first3(cb1):- known(first2(cb2)).

/*
definedClass(loop1(Obj),loop1,Obj):- Obj = abd.
definedClass(loop2(Obj),loop2,Obj):- Obj = abd.

*/

%-----------
% Ex 8 - Roles (Added by Sofia)
% Tbox: Second8 ⊑ First8
% Abox: fourth8(David)

first8(X) :- person8(Y), person8(X), known(role(X,Y)).
third8(X) :- known(second8(X)).
fifth8(X) :- known(fourth8(X)).

role(john,david).
person8(david).
person8(john).

definedRole(role(Obj1,Obj2),role,Obj1,Obj2) :- Obj1 = john, Obj2 = david.
definedClass(person8(Obj),person8,Obj):- ( Obj = david ; Obj = john).
definedClass(fifth8(Obj),fifth8,Obj):- Obj = david.
definedClass(fourth8(Obj),fourth8,Obj):- Obj = david.
definedClass(third8(Obj),third8,Obj):- Obj = john.
definedClass(second8(Obj),second8,Obj):- Obj = john.
definedClass(first8(Obj),first8,Obj):- Obj = john.

%------------



test:- 
       test_call(k(fifth(callback)),get_object_model(oid(callback,mknf),
                 [entry(known(fifth(callback)),[[]]),
                  entry(known(first(callback)),[[]]),
                  entry(known(fourth(callback)),[[]]),
                  entry(known(second(callback)),[[]]),
		  entry(known(third(callback)),[[]])],
                  [],
                  [entry(allModelsEntails(oid(callback,mknf),cid(fifth,mknf)),[[]]),
 		   entry(allModelsEntails(oid(callback,mknf),cid(first,mknf)),[[]]),
		   entry(allModelsEntails(oid(callback,mknf),cid(fourth,mknf)),[[]]),
 		   entry(allModelsEntails(oid(callback,mknf),cid(second,mknf)),[[]]),
		   entry(allModelsEntails(oid(callback,mknf),cid(third,mknf)),[[]])])),
        
       test_call(k(win5(tok)),get_object_model(oid(tok,mknf),
                 [entry(known(win1(tok)),[[]]),entry(known(win3(tok)),[[]]),
		  entry(known(win5(tok)),[[]])],
		 [entry(dlnot(win2(tok)),[[]]),entry(dlnot(win4(tok)),[[]])],
		 [entry(allModelsEntails(oid(tok,mknf),not cid(win2,mknf)),[[]]),
		  entry(allModelsEntails(oid(tok,mknf),not cid(win4,mknf)),[[]]),
		  entry(allModelsEntails(oid(tok,mknf),cid(win1,mknf)),[[]]),
		  entry(allModelsEntails(oid(tok,mknf),cid(win3,mknf)),[[]]),
		  entry(allModelsEntails(oid(tok,mknf),cid(win5,mknf)),[[]])])),

%         test_call(k(l1(ab)),get_object_model(oid(ab,mknf),
%          [entry(known(l1(ab),3),[[dlnot(l2(ab),3)],[allModelsEntails(oid(ab,mknf),cid(l1,mknf),2)]]),
%	   entry(known(l2(ab),3),[[dlnot(l1(ab),3)],[allModelsEntails(oid(ab,mknf),cid(l2,mknf),2)]])],
%         [entry(dlnot(l1(ab),3),[[tnot(known(l1(ab),3))]]),
%          entry(dlnot(l2(ab),3),[[tnot(known(l2(ab),3))]])],
%	 [entry(allModelsEntails(oid(ab,mknf),cid(l1,mknf),3),[[known(l1(ab),2),known(l2(ab),2)]]),
%          entry(allModelsEntails(oid(ab,mknf),cid(l2,mknf),3),[[known(l1(ab),2),known(l2(ab),2)]])])).

       test_call(k(l1(ab)),get_object_model(oid(ab,mknf),
          [entry(known(l1(ab)),[[dlnot(l2(ab))]]),
	   entry(known(l2(ab)),[[dlnot(l1(ab))]])],
         [entry(dlnot(l1(ab)),[[tnot(known(l1(ab)))]]),
          entry(dlnot(l2(ab)),[[tnot(known(l2(ab)))]])],
	 [])),

	 test_call(k(one4(a4)),get_object_model(oid(a4,mknf),
	   [entry(known(one4(a4)),[[]]),entry(known(p4(a4)),[[]])],
	   [entry(dlnot(two4(a4)),[[]])],
	   [entry(allModelsEntails(oid(a4,mknf),not cid(two4,mknf)),[[]]),
            entry(allModelsEntails(oid(a4,mknf),cid(one4,mknf)),[[]]),
            entry(allModelsEntails(oid(a4,mknf),cid(p4,mknf)),[[]])])),

     test_call(k(p5(a5)),get_object_model(oid(a5,mknf),
		[entry(known(p5(a5)),[[]]),entry(known(p_or_q5(a5)),[[]])],
		[entry(dlnot(q5(a5)),[[]]),entry(dlnot(r5(a5)),[[]])],
		[entry(allModelsEntails(oid(a5,mknf),not cid(r5,mknf)),[[]]),
		 entry(allModelsEntails(oid(a5,mknf),cid(p5,mknf)),[[]]),
 	 	 entry(allModelsEntails(oid(a5,mknf),cid(p_or_q5,mknf)),[[]])])),
 	 	 
    test_call(k(role(john,david)), get_object_model(oid(david,mknf),
        [entry(known(fifth8(david)),[[]]),entry(known(first8(john)),[[]]),
        entry(known(fourth8(david)),[[]]),entry(known(person8(david)),[[]]),
        entry(known(person8(john)),[[]]),entry(known(second8(john)),[[]]),
        entry(known(third8(john)),[[]]),entry(known(role(john,david)),[[]])],
        [entry(dlnot(role(john,david)),[[]])],
        [entry(allModelsEntails(oid(david,mknf),cid(fifth8,mknf)),[[]]),
        entry(allModelsEntails(oid(david,mknf),cid(fourth8,mknf)),[[]]),
        entry(allModelsEntails(oid(david,mknf),cid(person8,mknf)),[[]]),
        entry(allModelsEntails(oid(john,mknf),not exists(rid(role,mknf),oid(david,mknf))),[[]]),
        entry(allModelsEntails(oid(john,mknf),cid(first8,mknf)),[[]]),
        entry(allModelsEntails(oid(john,mknf),cid(person8,mknf)),[[]]),
        entry(allModelsEntails(oid(john,mknf),cid(second8,mknf)),[[]]),
        entry(allModelsEntails(oid(john,mknf),cid(third8,mknf)),[[]]),
        entry(allModelsEntails(oid(john,mknf),exists(rid(role,mknf),oid(david,mknf))),[[]])])). 
    
end_of_file.






