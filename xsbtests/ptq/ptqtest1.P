:- op(200, xfy,[\]).    % lambda when bound var occurs only once
:- op(190, yfx,[@]).
:- op(150, fx,[^]).
:- op(150, fx,[*]).

:- tabled(srev/2).

:- srev(A,S),fail.

st(r14,T,(X,Te,T1))  :- T  = Te@ ^(X\T1).


srev(T,Sb):- sc2(T,Sb).
srev(T,Sb):-                  % s14
        srev(T1,Sb1),
delete(sub(Te,X,_),Sb1,Sb), 
                st(r14,T,(X,Te,T1)).

delete(X,[X|L],L).
delete(X,[Y|L0],[Y|L1]) :- delete(X,L0,L1).

/*
sc1(@(\(A,@(*(A),B)),^(@(\(C,\(D,@(*(C),^(\(E,@(@('date*',*(E)),*(D))))))),^(\(F,@(*(F),G)))))),[],'.'(sub(\(H,@(*(H),^(j))),B,m),'.'(sub(\(I,@(*(I),^(m))),G,f),[])),0,3).
*/
sc2(foo,'.'(sub(\(H,@(*(H),^(j))),B,m),'.'(sub(\(I,@(*(I),^(m))),G,f),[]))).
