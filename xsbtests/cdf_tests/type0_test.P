
:- [altcdf].

:- import load_extensional_facts/1,
	  load_intensional_rules/1 from cdf_io.
:- import update_all_components/2 from cdf_comps_noshare.
:- import load_component/3 from cdf_comps_share.
:- import retractallExtTerm/1 from cdf_init_cdf.
:- import hasAttr/3 from cdf_init_cdf.

loadfacts:- 
	load_extensional_facts('type0_testdir').
%	load_intensional_rules('type0_testdir').

testreturns:- 
	testhasAttrtreturns.

testhasAttrtreturns:- 
% bbb
	test_display(hasAttr(cid(c2,test),rid(r2,test),cid(c12,test))),
% test bbf inh: X = o12 (not c12)
	test_display(hasAttr(cid(c2,test),rid(r2,test),X)),
% test bfb inh: X = rid(prod(rid(r2,test),rid(r2,test)),test); X = rid(r2,test)
	test_display(hasAttr(cid(c2,test),X,cid(c12,test))),
% test bfb inh: X = rid(prod(rid(r2,test),rid(r2,test)),test); X = r4, X = r1.
	test_display(hasAttr(oid(o2,test),X,cid(c12,test))),
% test fbb inh: X = cid(c2,test);
	test_display(hasAttr(X,rid(r2,test),cid(c12,test))),
% test fbb inh: X = cid(o2,test);
	test_display(hasAttr(X,rid(r1,test),cid(c12,test))),
% test fbb inh: X = cid(o2,test);
	test_display(hasAttr(X,rid(r1,test),cid(c12,test))),
% test bff inh:  X = rid(r4,test) Y = oid(o12,test);
%                     X = rid(r2,test) Y = oid(o12,test);
%                     X = rid(r1,test) Y = cid(c12,test);
%                     X = rid(prod(rid(r2,test),rid(r2,test)),test) Y = cid(c12,test);
	test_display(hasAttr(oid(o2,test),X,Y)).

testallAttrtreturns:- 
% bbb
	test_display(allAttr(cid(c2,test),rid(r2,test),cid(c12,test))),
% test bbf inh: X = o12 (not c12)
	test_display(allAttr(cid(c2,test),rid(r2,test),X)),
% test bfb inh: X = rid(prod(rid(r2,test),rid(r2,test)),test); X = rid(r2,test)
	test_display(allAttr(cid(c2,test),X,cid(c12,test))),
% test bfb inh: X = rid(prod(rid(r2,test),rid(r2,test)),test); X = r4, X = r1.
	test_display(allAttr(oid(o2,test),X,cid(c12,test))),
% test fbb inh: X = cid(c2,test);
	test_display(allAttr(X,rid(r2,test),cid(c12,test))),
% test fbb inh: X = cid(o2,test);
	test_display(allAttr(X,rid(r1,test),cid(c12,test))),
% test fbb inh: X = cid(o2,test);
	test_display(allAttr(X,rid(r1,test),cid(c12,test))),
% test bff inh:  X = rid(r4,test) Y = oid(o12,test);
%                     X = rid(r2,test) Y = oid(o12,test);
%                     X = rid(r1,test) Y = cid(c12,test);
%                     X = rid(prod(rid(r2,test),rid(r2,test)),test) Y = cid(c12,test);
	test_display(allAttr(oid(o2,test),X,Y)).

test_display(Goal):- 
	writeln('--------------------'),
	call(Goal),
	writeln(Goal),
	fail.
test_display(_).


end_of_file.

