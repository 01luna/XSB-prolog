?- debug[#check_undefined(on)]@flora(sys).

p(a).
q(b)(a,b).

_X[b->_Y] :- p(c).


tst1 :- p(X),
	write('tst1 succeeded, as expected: ')@flora(io),
	writeln(x=X)@flora(io).

tst2 :- q(X)(_Y,_Z),
	write('tst2 succeeded, as expected: ')@flora(io),
	writeln(x=X)@flora(io).

tst3 :- writeln('tst3 should cause an error: ')@flora(io),
	r(a)(_X,_Y),
	writeln('tst3: undefinedness check doesn''t work').

tst4 :- unless a[_Y->_Z] do
            writeln('tst4 failed, as expected: ')@flora(io).

tst5 :- write('tst5 should cause an error: ')@flora(io),
	_X[c->_Y],
	writeln('tst5: undefinedness check doesn''t work').


test :- tell(temp)@prolog(),
	tst1, tst2, tst4,
	told@prolog().

/*
%% These tests should cause undefinedness errors

?- tst3.
?- tst5.

*/
