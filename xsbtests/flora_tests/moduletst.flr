
?- expand_filename('auxiliary', X)@prolog(machine),
	assert(library_directory(X)).

?- nl@prolog(),writeln('Loading marymodule ...')@prolog()@prolog(), [marymodule >> marymodule].

john:employee.

john[salary(1990) -> 20].
john[salary(1991) -> 40].
john[salary(1992) -> 60].
john[salary(1993) -> 70].
john[salary(1994) -> 70].
john[salary(1995) -> 80].
john[salary(1996) -> 70].
john[salary(1997) -> 50].
john[salary(1998) -> 80].


tst1 :- Z = max{X|john[salary(Year)->X]}
	writeln(Z)@prolog().

tst2 :- Z = max{X|john[salary(Year) ->X], Year < 1996},
	writeln(Z)@prolog().

tst3 :- Z = max{X|mary[salary(Year)->X] @ marymodule}, writeln(Z)@prolog().

tst4 :- Z=count{Year|john.salary(Year) < max{X|john[salary(Y2)->X], Y2<Year} },
    	writeln(Z)@prolog().

tst5 :- Z=count{Year|john.salary(Year) < mary.salary(Year) @ marymodule},
	writeln(Z)@prolog().

tst6 :- Z= avg{X[Who]|Who[salary(Year)->X]; Who[salary(Year)->X] @ marymodule},
	write(Z)@prolog(), write('   ')@prolog(), writeln(Who)@prolog(), fail.
tst6.

test :- tell(temp), tst1, tst2, tst3, tst4, tst5, tst6, told.

